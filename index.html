<!doctype html>
<html>

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="en">
    <title>hyq</title>
    <meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <meta content="telephone=no, address=no" name="format-detection">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <style>
        *,html,body{
            margin:0;
            padding:0;
        }
        .body{
            max-width:640px;
            margin:0 auto;
        }
    </style>
</head>
<body>

<div class="body">

    <div style="text-align: center;padding:10px;display: none;">
        <p>欢迎添加客服微信</p>
    </div>

    <div>
        <img id="qrcode" src=""  style="width:100%;display: block;"/>
    </div>
</div>

<script>
  function sumWeight(list) {
    var sum = 0;
    list.forEach(function(li) {
      sum += li.weight;
    });
    return sum;
  }
  
  function selectQrcode(prizeList) {
    var weightSum = sumWeight(prizeList);
    var radom = Math.random()*weightSum;
    //权重数组重组并排序
    var lottery = {
      weight: radom,
    };
    var concatWeightArr = prizeList.concat(lottery);    //将随机数加入权重数组
    var sortedWeightArr = concatWeightArr.sort(function(a, b){return a.weight-b.weight;});    //将包含随机数的新权重数组按从小到大（升序）排序
    console.log("含权重随机数的新权重数组升序排序后：", sortedWeightArr);

    var randomIndex = sortedWeightArr.indexOf(lottery);    //索引随机数在新权重数组中的位置
    randomIndex = Math.min(randomIndex, prizeList.length -1);    //权重随机数的下标不得超过奖项数组的长度-1，重新计算随机数在奖项数组中的索引位置                
    console.log("本次权重随机数对应的数组下标：", randomIndex);

    var prize = prizeList[randomIndex];
    return prize.src;
  }
  var list = [{
    src: 'hyq.png',
    weight: 50,
  }, {
    src: 'llj.png',
    weight: 50,
  }];

  var src = selectQrcode(list);
  console.log(22222222, );

  window.onload = function() {
    var qrcode = document.getElementById('qrcode');
    console.log(8889, qrcode);
    qrcode.src = src;
  }
</script>

</body>

</html>